<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nossa História</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root { --green: #1DB954; }

    body{
      margin:0; padding:0;
      color:#fff;
      font-family:'Montserrat',sans-serif;
      background:#121212;
      transition: background 0.8s ease;
      overflow-x:hidden;
    }

    header{
      padding:60px 20px;
      text-align:center;
    }

    h1{
      margin:0;
      font-size:2.4rem;
      background: linear-gradient(45deg, #fff, var(--green));
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }

    .subtitle{
      margin-top:10px;
      color:#b3b3b3;
      letter-spacing:1.5px;
      font-size:1rem;
    }

    .galeria{
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(260px, 1fr));
      gap:22px;
      padding:24px;
      max-width:1200px;
      margin:0 auto;
    }

    .card{
      background:rgba(255,255,255,0.06);
      border-radius:12px;
      padding:12px;
      cursor:pointer;
      position:relative;
      overflow:hidden;

      /* Começa escondido, mas agora o JS funciona */
      opacity:0;
      transform: translateY(26px);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out, box-shadow 0.3s ease, background 0.3s ease;
    }

    .card.reveal{
      opacity:1;
      transform: translateY(0);
    }

    .card img{
      width:100%;
      height:280px;
      object-fit:cover;
      border-radius:8px;
      display:block;
      transition: transform 0.25s ease;
    }

    .card:hover, .card.active{
      background:rgba(255,255,255,0.14);
      transform: scale(1.02) translateY(-6px);
      box-shadow:0 25px 50px rgba(0,0,0,0.65);
    }

    .card:hover img, .card.active img{
      transform: scale(1.06);
    }

    /* Mensagem por cima */
    .card::before{
      content: attr(data-frase);
      position:absolute;
      inset:0;
      background:rgba(0,0,0,0.90);
      color: var(--green);
      font-weight:700;
      font-size:1.15rem;
      padding:22px;

      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      line-height:1.35;

      opacity:0;
      transform: translateY(100%);
      transition: opacity 0.35s ease, transform 0.35s ease;
      pointer-events:none;
    }

    .card:hover::before, .card.active::before{
      opacity:1;
      transform: translateY(0);
    }

    /* Se o browser não suportar IntersectionObserver, não esconda */
    .no-io .card{
      opacity:1;
      transform:none;
    }
  </style>
</head>

<body>
  <header>
    <h1>Nossa História</h1>
    <p class="subtitle">Toque nas fotos para ler as mensagens</p>
  </header>

  <div class="galeria">
    <div class="card" data-frase="Frase 1"><img src="foto1.jpeg" alt="Foto 1"></div>
    <div class="card" data-frase="Frase 2"><img src="foto2.jpeg" alt="Foto 2"></div>
    <div class="card" data-frase="Frase 3"><img src="foto3.jpeg" alt="Foto 3"></div>
    <div class="card" data-frase="Frase 4"><img src="foto4.jpeg" alt="Foto 4"></div>
    <div class="card" data-frase="Frase 5"><img src="foto5.jpeg" alt="Foto 5"></div>
    <div class="card" data-frase="E que daqui uns anos sejamos nós dois."><img src="foto6.jpeg" alt="Foto 6"></div>
    <div class="card" data-frase="Frase 7"><img src="foto7.jpeg" alt="Foto 7"></div>
    <div class="card" data-frase="Frase 8"><img src="foto8.jpeg" alt="Foto 8"></div>
    <div class="card" data-frase="Frase 9"><img src="foto9.jpeg" alt="Foto 9"></div>
    <div class="card" data-frase="Frase 10"><img src="foto10.jpeg" alt="Foto 10"></div>
    <div class="card" data-frase="Frase 11"><img src="foto11.jpeg" alt="Foto 11"></div>
  </div>

  <script>
    // Degradê no scroll
    window.addEventListener('scroll', () => {
      const denom = (document.documentElement.scrollHeight - window.innerHeight) || 1;
      const scrollPct = window.scrollY / denom;
      const r = Math.floor(18 + (scrollPct * 50));
      const g = Math.floor(18 + (scrollPct * 20));
      const b = Math.floor(18 + (scrollPct * 80));
      document.body.style.background = `rgb(${r}, ${g}, ${b})`;
    });

    const cards = document.querySelectorAll('.card');

    // Reveal (CORRETO)
    if (!('IntersectionObserver' in window)) {
      document.body.classList.add('no-io');
    } else {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) entry.target.classList.add('reveal');
        });
      }, { threshold: 0.1 });

      cards.forEach(card => observer.observe(card));
    }

    // Hover/touch
    cards.forEach(card => {
      card.addEventListener('mouseenter', () => card.classList.add('active'));
      card.addEventListener('mouseleave', () => card.classList.remove('active'));

      card.addEventListener('touchstart', (e) => {
        e.preventDefault();
        card.classList.add('active');
      }, { passive: false });

      card.addEventListener('touchend', () => {
        setTimeout(() => card.classList.remove('active'), 2500);
      });
    });
  </script>
</body>
</html>
